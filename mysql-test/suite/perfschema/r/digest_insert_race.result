truncate table performance_schema.events_statements_summary_by_digest;
use test;
SET DEBUG_SYNC='after_lf_hash_search SIGNAL not_found WAIT_FOR continue';
"Waiting for con1"
SET DEBUG_SYNC='now WAIT_FOR not_found';
use test;
select "Con2";
Con2
Con2
SET DEBUG_SYNC='now SIGNAL continue';
SELECT schema_name, digest, digest_text, count_star
FROM performance_schema.events_statements_summary_by_digest USE INDEX()
where schema_name = 'test';
schema_name	digest	digest_text	count_star
test	4984952f36b85954d237b3f04a711cc1	USE `test`	2
test	53772710ae47d32c4a0e9075b33bd94d	SET `DEBUG_SYNC` = ?	3
test	a532c6f3e890282b7eee77f35ee85ae9	SELECT ?	1
test	e6628a0d51a41865a2ac8de78a8be09d	TRUNCATE TABLE `performance_schema` . `events_statements_summary_by_digest`	1
SELECT schema_name, digest, digest_text, count_star
FROM performance_schema.events_statements_summary_by_digest
WHERE schema_name = 'test';
schema_name	digest	digest_text	count_star
test	14761ddf05179334c39e7781a0403595	SELECT SCHEMA_NAME , `digest` , `digest_text` , `count_star` FROM `performance_schema` . `events_statements_summary_by_digest` USE INDEX ( ) WHERE SCHEMA_NAME = ?	1
test	4984952f36b85954d237b3f04a711cc1	USE `test`	2
test	53772710ae47d32c4a0e9075b33bd94d	SET `DEBUG_SYNC` = ?	3
test	a532c6f3e890282b7eee77f35ee85ae9	SELECT ?	1
test	e6628a0d51a41865a2ac8de78a8be09d	TRUNCATE TABLE `performance_schema` . `events_statements_summary_by_digest`	1
