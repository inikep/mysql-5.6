SELECT @@GLOBAL.enable_user_tables_engine_check;
@@GLOBAL.enable_user_tables_engine_check
1
SET @start_value= @@global.enable_user_tables_engine_check;
SET @@session.enable_user_tables_engine_check=ON;
create table t1(a int primary key) engine=InnoDB;
ERROR HY000: User table creation [test.t1] is blocked on Storage engine InnoDB
create temporary table temp_t1(a int primary key) engine=InnoDB;
drop table temp_t1;
create table mysql.enable_user_tables_engine_check_test(a int primary key);
drop table mysql.enable_user_tables_engine_check_test;
create table t1(a int primary key) engine=Rocksdb;
alter table t1 engine=InnoDB;
ERROR HY000: User table creation [test.t1] is blocked on Storage engine InnoDB
drop table t1;
SET @@session.enable_user_tables_engine_check=OFF;
create table t1(a int primary key) engine=InnoDB;
drop table t1;
create temporary table temp_t1(a int primary key) engine=InnoDB;
drop table temp_t1;
create table mysql.enable_user_tables_engine_check_test(a int primary key);
drop table mysql.enable_user_tables_engine_check_test;
create table t1(a int primary key) engine=Rocksdb;
alter table t1 engine=InnoDB;
drop table t1;
SET @@global.enable_user_tables_engine_check=@start_value;
